<!DOCTYPE html>
<html lang="en" id="html-tag">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retag AI | Premium Experience</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { 
            --bg: #f8f9fa; --text: #222; --primary: #d4a373; --glass: rgba(255, 255, 255, 0.7);
            --sidebar-bg: #ffffff; --card-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
        }
        [data-theme="dark"] { 
            --bg: #000000; --text: #ffffff; --primary: #9966cc; --glass: rgba(15, 15, 15, 0.6);
            --sidebar-bg: #0a0a0a; --card-shadow: 0 8px 32px rgba(153, 102, 204, 0.3);
        }

        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); transition: 0.4s; overflow-x: hidden; }

        /* شاشة التحميل */
        #preloader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; display: flex; justify-content: center; align-items: center; }
        .loader-logo { color: var(--primary); font-size: 32px; font-weight: bold; letter-spacing: 2px; animation: pulse 1.5s infinite; }
        .loader-logo span { color: #fff; margin-left: 5px; font-style: italic; }
        @keyframes pulse { 0%, 100% { opacity: 0.4; transform: scale(0.95); } 50% { opacity: 1; transform: scale(1.05); } }

        /* تأثير الزجاج القوي */
        .glass-card { 
            background: var(--glass); 
            backdrop-filter: blur(20px) saturate(180%); 
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.2); 
            box-shadow: var(--card-shadow); 
            border-radius: 25px; 
        }

        nav { background: var(--primary); padding: 12px 25px; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; }
        .nav-user-img { width: 38px; height: 38px; border-radius: 50%; border: 2px solid white; object-fit: cover; cursor: pointer; }

        .sidebar { position: fixed; top: 0; width: 290px; height: 100%; background: var(--sidebar-bg); z-index: 4000; transition: 0.5s; visibility: hidden; padding: 30px; }
        #html-tag[dir="ltr"] .sidebar { left: -350px; }
        #html-tag[dir="ltr"] .sidebar.active { left: 0; visibility: visible; }
        #html-tag[dir="rtl"] .sidebar { right: -350px; left: auto; }
        #html-tag[dir="rtl"] .sidebar.active { right: 0; visibility: visible; }
        
        #toast-container { position: fixed; top: 80px; right: 20px; z-index: 9999; }
        .toast { background: var(--primary); color: white; padding: 15px 25px; border-radius: 12px; margin-bottom: 10px; animation: slideIn 0.4s forwards; }
        @keyframes slideIn { from { transform: translateX(120%); } to { transform: translateX(0); } }

        .btn-main { background: var(--primary); color: white; width: 100%; padding: 14px; border: none; border-radius: 12px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        
        #profile-section { display: none; padding: 40px 20px; max-width: 600px; margin: 40px auto; text-align: center; }
        .profile-pic-container img { width: 130px; height: 130px; border-radius: 50%; object-fit: cover; border: 5px solid var(--primary); margin-bottom: 15px; }

        footer { padding: 40px; text-align: center; opacity: 0.7; }
    </style>
</head>
<body>

    <div id="preloader"><div class="loader-logo">RETAG AI <span>PLUS</span></div></div>
    <div id="toast-container"></div>
    <div class="mask" id="mask" onclick="toggleMenu()" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.4); z-index:3500; backdrop-filter: blur(5px);"></div>

    <nav>
        <i class="fas fa-bars" onclick="toggleMenu()" style="color:white; font-size:24px; cursor:pointer"></i>
        <div style="font-weight: bold; font-size: 24px; color: white; letter-spacing: 1px;">RETAG AI</div>
        <img id="nav-p-img" src="https://via.placeholder.com/150" class="nav-user-img" onclick="showProfile()" style="display:none;">
    </nav>

    <div class="sidebar glass-card" id="sidebar">
        <h2 id="m-title" style="border-bottom: 2px solid var(--primary); padding-bottom: 10px;">Settings</h2>
        <div style="margin-top:20px;">
            <div onclick="showProfile()" style="padding:15px; cursor:pointer"><i class="fas fa-user"></i> <span id="s-prof">Profile</span></div>
            <div onclick="toggleTheme()" style="padding:15px; cursor:pointer"><i class="fas fa-moon"></i> <span id="s-theme">Theme</span></div>
            <div style="padding:15px;">
                <i class="fas fa-globe"></i>
                <select onchange="changeLang(this.value)" id="lang-picker" style="background:transparent; border:none; color:inherit; font-weight:bold;">
                    <option value="en">English</option>
                    <option value="ar">العربية</option>
                </select>
            </div>
            <div id="logout-btn" onclick="logout()" style="padding:15px; color:#ff4444; cursor:pointer; margin-top:30px; display:none;"><i class="fas fa-sign-out-alt"></i> Logout</div>
        </div>
    </div>

    <section id="login-section" style="padding: 60px 20px; display: flex; justify-content: center;">
        <div class="login-container glass-card" style="padding:40px; width:100%; max-width:400px; text-align:center;">
            <h2 id="l-title">Retag AI Login</h2>
            <input type="email" id="email" placeholder="Email" style="width:100%; padding:15px; margin:10px 0; border-radius:12px; border:1px solid #ddd; background:rgba(255,255,255,0.1); color:var(--text); box-sizing:border-box;">
            <input type="password" id="pass" placeholder="Password" style="width:100%; padding:15px; margin:10px 0; border-radius:12px; border:1px solid #ddd; background:rgba(255,255,255,0.1); color:var(--text); box-sizing:border-box;">
            <button class="btn-main" onclick="finalizeLogin()">Sign In</button>
        </div>
    </section>

    <section id="profile-section" class="glass-card">
        <img id="profile-display" src="https://via.placeholder.com/150" style="width:130px; height:130px; border-radius:50%; border:5px solid var(--primary);">
        <h2 id="user-display-name">User</h2>
        <div style="padding:20px;">
            <input type="text" id="edit-name" placeholder="New Name" style="width:100%; padding:12px; border-radius:10px; border:1px solid #ddd; margin-bottom:10px; background:transparent; color:var(--text);">
            <button class="btn-main" onclick="saveProfile()">Save</button>
            <p style="margin-top:20px;">AI Usage: <span id="ai-count">0</span></p>
            <button class="btn-main" style="background:#888; margin-top:10px;" onclick="location.reload()">Back</button>
        </div>
    </section>

    <section id="options-section" style="display:none; padding:40px 20px; text-align:center;">
        <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap:25px; max-width:1000px; margin:auto;">
            <div class="glass-card" style="padding:40px;">
                <i class="fas fa-robot" style="font-size:40px; color:var(--primary); margin-bottom:15px;"></i>
                <h3>Start Retag AI</h3>
                <button class="btn-main" onclick="useAI()">Launch Chat</button>
            </div>
        </div>
    </section>

    <footer>
        <p id="copy">All Rights Reserved © 2026</p>
        <p><strong>Developed by Retag Khaled</strong></p>
    </footer>

    <script>
        window.addEventListener('load', () => { setTimeout(() => { document.getElementById('preloader').style.display = 'none'; }, 1000); });

        function showToast(msg) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerText = msg;
            document.getElementById('toast-container').appendChild(toast);
            setTimeout(() => { toast.style.opacity = '0'; setTimeout(() => toast.remove(), 500); }, 3000);
        }

        function toggleMenu() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('active');
            document.getElementById('mask').style.display = sidebar.classList.contains('active') ? 'block' : 'none';
        }

        function finalizeLogin() {
            localStorage.setItem('isLoggedIn', 'true');
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
            showToast("Welcome to Retag AI");
            setTimeout(() => location.reload(), 2000);
        }

        function useAI() {
            let count = parseInt(localStorage.getItem('aiUsage') || 0);
            localStorage.setItem('aiUsage', ++count);
            document.getElementById('ai-count').innerText = count;
            showToast("AI Ready!");
        }

        function logout() { localStorage.removeItem('isLoggedIn'); location.reload(); }
        function showProfile() { document.getElementById('profile-section').style.display = 'block'; document.getElementById('options-section').style.display = 'none'; document.getElementById('login-section').style.display = 'none'; toggleMenu(); }
        function saveProfile() { const name = document.getElementById('edit-name').value; if(name) { localStorage.setItem('userName', name); showToast("Updated!"); setTimeout(() => location.reload(), 1000); } }
        function toggleTheme() { const isDark = document.body.getAttribute('data-theme') === 'dark'; document.body.setAttribute('data-theme', isDark ? 'light' : 'dark'); localStorage.setItem('theme', isDark ? 'light' : 'dark'); showToast("Theme Updated"); }
        function changeLang(lang) { localStorage.setItem('lang', lang); document.getElementById('html-tag').setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr'); showToast("Language Updated"); }

        document.addEventListener('DOMContentLoaded', () => {
            if(localStorage.getItem('theme') === 'dark') document.body.setAttribute('data-theme', 'dark');
            const lang = localStorage.getItem('lang') || 'en';
            document.getElementById('lang-picker').value = lang;
            document.getElementById('html-tag').setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');
            
            if(localStorage.getItem('isLoggedIn')) {
                document.getElementById('login-section').style.display = 'none';
                document.getElementById('options-section').style.display = 'block';
                document.getElementById('logout-btn').style.display = 'block';
                document.getElementById('nav-p-img').style.display = 'block';
                document.getElementById('ai-count').innerText = localStorage.getItem('aiUsage') || 0;
                document.getElementById('user-display-name').innerText = localStorage.getItem('userName') || 'User';
            }
        });
    </script>
</body>
</html>
